!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-array"),require("d3-scale"),require("d3-time"),require("d3-random"),require("d3-request"),require("d3-path"),require("d3-selection"),require("d3-shape"),require("d3-dispatch")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-scale","d3-time","d3-random","d3-request","d3-path","d3-selection","d3-shape","d3-dispatch"],n):n(t.fc=t.fc||{},t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3)}(this,function(t,n,e,r,i,o,u,a,c,l){"use strict";function f(t){return t}function h(t){}function s(t){return"function"==typeof t?t:function(){return t}}function d(t){return"number"==typeof t&&isNaN(t)?void 0:t}function g(t,n,e){var r=t.map(function(t){return[n(t),t]}),i=function(t){return t instanceof Date?t.getTime():t},o=r.reduce(function(t,n){return 0===t.filter(function(t){return i(t[0])===i(n[0])}).length&&t.push(n),t},[]);return o.map(function(t){return t[1]})}function v(t){var n=this;arguments.length||(t=e.scaleIdentity());var r=Q(),i=function(n){var e=t.domain(),i=t.range(),o=r.distance(e[0],e[1]),u=r.distance(e[0],n),a=u/o,c=a*(i[1]-i[0])+i[0];return c};return i.invert=function(n){var e=t.domain(),i=t.range(),o=(n-i[0])/(i[1]-i[0]),u=r.distance(e[0],e[1]),a=o*u;return r.offset(e[0],a)},i.domain=function(){if(!arguments.length)return t.domain();var n=arguments.length<=0?void 0:arguments[0],e=r.clampUp(n[0]),o=r.clampDown(n[1]);return t.domain([e,o]),i},i.nice=function(){t.nice();var n=t.domain(),e=r.clampUp(n[0]),o=r.clampDown(n[1]);return t.domain([e,o]),i},i.ticks=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var u=t.ticks.apply(n,r);return g(u,i,i.domain())},i.copy=function(){return v(t.copy()).discontinuityProvider(r.copy())},i.discontinuityProvider=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},T(i,t,M("range","rangeRound","interpolate","clamp","tickFormat")),i}function p(t){return"function"==typeof t?t:function(){return t}}function m(){var t=arguments;return function(n,e){for(var r=0,i=t.length;r<i;r++)if(null==t[r](n,e))return!1;return!0}}function y(){var t=arguments;return function(n,e){for(var r=0,i=t.length;r<i;r++)if(null==t[r](n,e))return!1;return!0}}var b=function(t,n,e){var r=n[e];if("function"!=typeof r)throw new Error("Attempt to rebind "+e+" which isn't a function on the source object");return function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var u=r.apply(n,i);return u===n?t:u}},w=function(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];var o=!0,u=!1,a=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;t[f]=b(t,n,f)}}catch(t){u=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(u)throw a}}return t},x=function(t){return function(n){return t.reduce(function(t,n){return t&&n(t)},n)}},T=function(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];var o=x(r),u=!0,a=!1,c=void 0;try{for(var l,f=Object.keys(n)[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value,s=o(h);s&&(t[s]=b(t,n,h))}}catch(t){a=!0,c=t}finally{try{!u&&f.return&&f.return()}finally{if(a)throw c}}return t},E=function(t){return t.map(function(t){return"string"==typeof t?new RegExp("^"+t+"$"):t})},S=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n=E(n),function(t){return n.every(function(n){return!n.test(t)})&&t}},M=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n=E(n),function(t){return n.some(function(n){return n.test(t)})&&t}},k=function(t){return function(n){return t[n]}},L=function(t){return t[0].toUpperCase()+t.slice(1)},A=function(t){return function(n){return t+L(n)}},H=function(){var t=function(){return 10},n=h,e=f,r=function(t){return null!=t},i=function(i){var o=t.apply(this,arguments),u=i.slice(0,o).map(e);return i.map(function(t,i){return i>=o&&(u.shift(),u.push(e(t,i))),i<o-1||u.some(function(t){return!r(t)})?n(void 0,i):n(u,i)})};return i.period=function(){return arguments.length?(t=s(arguments.length<=0?void 0:arguments[0]),i):t},i.accumulator=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.defined=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.value=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i},O=function(){var t=2,e=H().accumulator(function(e){var r=e&&n.deviation(e),i=e&&n.mean(e);return{average:i,upper:d(i+t*r),lower:d(i-t*r)}}),r=function(t){return e(t)};return r.multiplier=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},w(r,e,"period","value"),r},_=function(){var t=f,e=function(){return 9},r=function(t){var e=[];return function(r){var i=void 0;return e.length<t&&(null!=r?e.push(r):e=[]),e.length>=t&&(i=n.mean(e)),i}},i=function(n){var i=e.apply(this,arguments),o=2/(i+1),u=r(i),a=void 0;return n.map(function(n,e){var r=t(n,e);return a=void 0===a?u(r):r*o+(1-o)*a,d(a)})};return i.period=function(){return arguments.length?(e=s(arguments.length<=0?void 0:arguments[0]),i):e},i.value=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i},C=function(){var t=f,e=_().period(12),r=_().period(26),i=_().period(9),o=function(o){e.value(t),r.value(t);var u=n.zip(e(o),r(o)).map(function(t){return void 0!==t[0]&&void 0!==t[1]?t[0]-t[1]:void 0}),a=i(u);return n.zip(u,a).map(function(t){return{macd:t[0],signal:t[1],divergence:void 0!==t[0]&&void 0!==t[1]?t[0]-t[1]:void 0}})};return o.value=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},T(o,e,k({period:"fastPeriod"})),T(o,r,k({period:"slowPeriod"})),T(o,i,k({period:"signalPeriod"})),o},D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},I=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),V=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},P=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},z=function(){function t(t,n){var e=[],r=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),R=function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)},F=function(){var t=H().period(14),e=function(t,n){return n+(t[t.length-1]-n)/t.length},r=function(t){var n=z(t,2),e=n[0],r=n[1];return e<r?0:e-r},i=function(t){var n=z(t,2),e=n[0],r=n[1];return e>r?0:r-e},o=function(t,r){return void 0!==r?e(t,r):n.mean(t)},u=function(){var t=void 0,e=void 0,u=void 0;return function(a){if(!a)return void(void 0!==t&&(t=NaN));if(void 0===t)return void(t=a[0]);var c=n.pairs([t].concat(R(a)));e=o(c.map(r),e),u=o(c.map(i),u);var l=isNaN(t)?NaN:u/e;return d(100-100/(1+l))}},a=function(n){var e=u();return t.accumulator(e),t(n)};return w(a,t,"period","value"),a},U=function(){var t=H().accumulator(function(t){return t&&n.mean(t)}),e=function(n){return t(n)};return w(e,t,"period","value"),e},B=function(){var t=function(t,n){return t.close},e=function(t,n){return t.high},r=function(t,n){return t.low},i=H().period(5).defined(function(n){return null!=t(n)&&null!=e(n)&&null!=r(n)}).accumulator(function(i){var o=i&&n.max(i,e),u=i&&n.min(i,r),a=i&&100*(t(i[i.length-1])-u)/(o-u);return d(a)}),o=U().period(3),u=function(t){var n=i(t),e=o(n);return n.map(function(t,n){return{k:t,d:e[n]}})};return u.closeValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.highValue=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.lowValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],u):r},T(u,i,k({period:"kPeriod"})),T(u,o,k({period:"dPeriod"})),u},q=function(){var t=function(t,n){return t.volume},n=function(t,n){return t.close},e=_().period(13),r=H().period(2).defined(function(e){return null!=n(e)&&null!=t(e)}).accumulator(function(e){return e&&d((n(e[1])-n(e[0]))*t(e[1]))}),i=function(t){var n=r(t);return e(n)};return i.volumeValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.closeValue=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},w(i,e,"period"),i},W=function(){var t=.1,n=f,e=function(e){return e.map(function(e){var r=d(n(e)*(1-t)),i=d(n(e)*(1+t));return{lower:r,upper:i}})};return e.factor=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],e):t},e.value=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],e):n},e},j=function(){var t=function(t,n){return t.close},e=function(t,n){return t.high},r=function(t,n){return t.low},i=_().period(13),o=function(o){return i.value(t),n.zip(o,i(o)).map(function(t){var n=d(e(t[0])-t[1]),i=d(r(t[0])-t[1]);return{bullPower:n,bearPower:i}})};return o.closeValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.highValue=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.lowValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},w(o,i,"period"),o},Q=function(){var t={};return t.distance=function(t,n){return n-t},t.offset=function(t,n){return t instanceof Date?new Date(t.getTime()+n):t+n},t.clampUp=function(t){return t},t.clampDown=function(t){return t},t.copy=function(){return t},t},G=function(){var t=864e5,n=5*t,e=7*t,i={},o=function(t){return 0===t.getDay()||6===t.getDay()};return i.clampDown=function(t){if(t&&o(t)){var n=0===t.getDay()?2:1,e=r.timeDay.ceil(t);return r.timeDay.offset(e,-n)}return t},i.clampUp=function(t){if(t&&o(t)){var n=0===t.getDay()?1:2,e=r.timeDay.floor(t);return r.timeDay.offset(e,n)}return t},i.distance=function(t,o){t=i.clampUp(t),o=i.clampDown(o);var u=r.timeSaturday.ceil(t);if(o<u)return o.getTime()-t.getTime();var a=u.getTime()-t.getTime(),c=r.timeSaturday.ceil(o),l=c.getTime()-o.getTime(),f=Math.round((c.getTime()-u.getTime())/e);return f*n+a-l},i.offset=function(t,e){var u=o(t)?i.clampUp(t):t;if(0===e)return u;var a=e<0,c=e>0,l=e,f=a?r.timeMonday.floor(u):r.timeSaturday.ceil(u);if(l-=f.getTime()-u.getTime(),a&&l>0||c&&l<0)return new Date(u.getTime()+e);u=a?f:r.timeDay.offset(f,2);var h=Math.floor(l/n);return u=r.timeDay.offset(u,7*h),l-=h*n,u=new Date(u.getTime()+l)},i.copy=function(){return i},i},Y=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=function(t,n){return t>n[0]&&t<n[1]},i=function(t,n){return t[0]>=n[0]&&t[1]<=n[1]},o={};o.distance=function(t,e){t=o.clampUp(t),e=o.clampDown(e);var r=n.filter(function(n){return i(n,[t,e])}),u=r.map(function(t){return t[1]-t[0]});return e-t-u.reduce(function(t,n){return t+n},0)};var u=function(t,n){return t instanceof Date?new Date(t.getTime()+n):t+n};return o.offset=function(t,e){if(e>0){var r=function(){for(var r=o.clampUp(t),i=e;i>0;){var a=n.filter(function(t){return t[0]>r}).sort(function(t,n){return t[0]-n[0]});if(a.length){var c=a[0],l=c[0]-r;l>i?(r=u(r,i),i=0):(r=c[1],i-=l)}else r=u(r,i),i=0}return{v:r}}();if("object"===("undefined"==typeof r?"undefined":D(r)))return r.v}else{var i=function(){for(var r=o.clampDown(t),i=e;i<0;){var a=n.filter(function(t){return t[1]<r}).sort(function(t,n){return n[0]-t[0]});if(a.length){var c=a[0],l=c[1]-r;l<i?(r=u(r,i),i=0):(r=c[0],i-=l)}else r=u(r,i),i=0}return{v:r}}();if("object"===("undefined"==typeof i?"undefined":D(i)))return i.v}},o.clampUp=function(t){return n.reduce(function(t,n){return r(t,n)?n[1]:t},t)},o.clampDown=function(t){return n.reduce(function(t,n){return r(t,n)?n[0]:t},t)},o.copy=function(){return o},o},X=function(){var t=[function(t){return t}],e=[0,0],r="percent",i=null,o=[],u=function(u){var a=new Array(u.length),c=!0,l=!1,f=void 0;try{for(var h,s=t[Symbol.iterator]();!(c=(h=s.next()).done);c=!0)for(var d=h.value,g=0;g<u.length;g++){var v=d(u[g],g);Array.isArray(v)?a.push.apply(a,R(v)):a.push(v)}}catch(t){l=!0,f=t}finally{try{!c&&s.return&&s.return()}finally{if(l)throw f}}var p=[n.min(a),n.max(a)];if(p[0]=null==p[0]?n.min(o):n.min([p[0]].concat(R(o))),p[1]=null==p[1]?n.max(o):n.max([p[1]].concat(R(o))),null!=i){var m=Math.max(Math.abs(p[1]-i),Math.abs(p[0]-i));p[0]=i-m,p[1]=i+m}switch(r){case"domain":p[0]-=e[0],p[1]+=e[1];break;case"percent":var y=p[1]-p[0];p[0]-=e[0]*y,p[1]+=e[1]*y;break;default:throw new Error("Unknown padUnit: "+r)}return p};return u.accessors=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.pad=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.padUnit=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],u):r},u.include=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],u):o},u.symmetricalAbout=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],u):i},u},Z=function(){var t=[],n=[0,0],e="percent",r=null,i=[],o=X(),u=function(u){var a=t.map(function(t){return function(){var n=t.apply(void 0,arguments);return Array.isArray(n)?n.map(function(t){return t.valueOf()}):n.valueOf()}});return o.accessors(a).pad(n).padUnit(e).symmetricalAbout(null!=r?r.valueOf():null).include(i.map(function(t){return t.valueOf()})),o(u).map(function(t){return new Date(t)})};return u.accessors=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.pad=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},u.padUnit=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.include=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],u):i},u.symmetricalAbout=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],u):r},u},K=function(){var t=1,n=20,e=.1,r=.1,o=i.randomNormal(),u=function(i){for(var u=t/n,a=[],c=0;c<n+1;c++){a.push(i);var l=o()*Math.sqrt(u)*r+(e-r*r/2)*u;i*=Math.exp(l)}return a};return u.period=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.steps=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},u.mu=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.sigma=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],u):r},u.randomNormal=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],u):o},u},$=function(){var t=new Date,n=100,e=r.timeDay,o=1,u=r.timeYear,a=1,c=null,l=function(){var t=i.randomNormal(1,.1);return Math.ceil(1e3*t())},f=K(),h=function(t){var n=u.offset(t,a)-t;return(e.offset(t,o)-t)/n},s=function(t,n){var e=h(t),r=f.period(e)(n),i={date:t,open:r[0],high:Math.max.apply(Math,r),low:Math.min.apply(Math,r),close:r[f.steps()]};return i.volume=l(i),i},d=function(r){var i=void 0,u=void 0,a=void 0;do i=r?e.offset(r.date,o):new Date(t.getTime()),u=r?r.close:n,r=s(i,u),a=c&&!c(r);while(a);return r},g=function(){var t=void 0,n={};return n.next=function(){var n=d(t);return t=n,n},n.take=function(t){return n.until(function(n,e){return!t||t<0||e===t})},n.until=function(n){for(var e=[],r=0,i=d(t),o=n&&!n(i,r);o;)e.push(i),t=i,i=d(t),r+=1,o=n&&!n(i,r);return e},n},v=function(t){return g().take(t)};return v.stream=g,v[Symbol.iterator]=function(){var t=g();return{next:function(){return{value:t.next(),done:!1}}}},v.startDate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],v):t},v.startPrice=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],v):n},v.interval=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],v):e},v.intervalStep=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],v):o},v.unitInterval=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},v.unitIntervalStep=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],v):a},v.filter=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},v.volume=function(){return arguments.length?(l=p(arguments.length<=0?void 0:arguments[0]),v):l},w(v,f,"steps","mu","sigma"),v},J=function(t){var n=t.date.getDay();return!(0===n||6===n)},tt=function(){var t="BTC-USD",n=null,e=null,r=null,i=function(i){var u=[];null!=n&&u.push("start="+n.toISOString()),null!=e&&u.push("end="+e.toISOString()),null!=r&&u.push("granularity="+r);var a="https://api.gdax.com/products/"+t+"/candles?"+u.join("&");o.json(a,function(t,n){return t?void i(t):(n=n.map(function(t){return{date:new Date(1e3*t[0]),open:t[3],high:t[2],low:t[1],close:t[4],volume:t[5]}}),void i(t,n))})};return i.product=function(n){return arguments.length?(t=n,i):t},i.start=function(t){return arguments.length?(n=t,i):n},i.end=function(t){return arguments.length?(e=t,i):e},i.granularity=function(t){return arguments.length?(r=t,i):r},i},nt=function(){function t(t){return t[0].toLowerCase()+t.substr(1)}var n="YAHOO",e="GOOG",r=null,i=null,u=null,a=null,c=!1,l=null,f=t,h=function(t){var h=[];null!=r&&h.push("api_key="+r),null!=i&&h.push("start_date="+i.toISOString().substring(0,10)),null!=u&&h.push("end_date="+u.toISOString().substring(0,10)),null!=a&&h.push("rows="+a),c||h.push("order=asc"),null!=l&&h.push("collapse="+l);var s="https://www.quandl.com/api/v3/datasets/"+n+"/"+e+"/data.json?"+h.join("&");o.json(s,function(n,e){if(n)return void t(n);var r=e.dataset_data,i=f||function(t){return t},o=r.column_names.map(function(t,n){return[n,i(t)]}).filter(function(t){return t[1]}),u=r.data.map(function(t){var n={};return o.forEach(function(e){n[e[1]]=0===e[0]?new Date(t[e[0]]):t[e[0]]}),n});t(n,u)})};return h.database=function(t){return arguments.length?(n=t,h):n},h.dataset=function(t){return arguments.length?(e=t,h):e},h.apiKey=function(t){return arguments.length?(r=t,h):r},h.start=function(t){return arguments.length?(i=t,h):i},h.end=function(t){return arguments.length?(u=t,h):u},h.rows=function(t){return arguments.length?(a=t,h):a},h.descending=function(t){return arguments.length?(c=t,h):c},h.collapse=function(t){return arguments.length?(l=t,h):l},h.columnNameMap=function(t){return arguments.length?(f=t,h):f},h.defaultColumnNameMap=t,h},et=function(){var t=10,e=function(e){return t<=1?e.map(function(t){return[t]}):n.range(0,Math.ceil(e.length/t)).map(function(n){return e.slice(n*t,(n+1)*t)})};return e.bucketSize=function(n){return arguments.length?(t=n,e):t},e},rt=function(){function t(t){var e=t.map(function(t){return[r(t),i(t)]}),o=n.range(1,e.length-1).map(function(t){var n=e[t-1],r=e[t],i=e[t+1],o=(n[0]-i[0])*(r[1]-n[1]),u=(n[0]-r[0])*(i[1]-n[1]);return Math.abs(.5*o*u)});return o}var e=et(),r=function(t){return t},i=function(t){return t},o=function(r){if(e.bucketSize()>=r.length)return r;var i=t(r),o=e(i),u=e(r.slice(1,r.length-1)),a=u.map(function(t,e){var r=o[e],i=n.max(r),u=r.indexOf(i);return t[u]});return[].concat([r[0]],a,[r[r.length-1]])};return w(o,e,"bucketSize"),o.x=function(t){return arguments.length?(r=t,o):r},o.y=function(t){return arguments.length?(i=t,o):i},o},it=function(){var t=function(t){return t},e=function(t){return t},r=et(),i=function(i){if(r.bucketSize()>=i.length)return i;var o=r(i.slice(1,i.length-1)),u=i[0],a=i[i.length-1],c=[].concat([u],o,[a]),l=t(u),f=e(u),h=o.map(function(r,i){var o=n.mean(c[i+1],t),u=n.mean(c[i+1],e),a=r.map(function(n){return[t(n),e(n)]}),h=a.map(function(t){var n=(l-o)*(t[1]-f),e=(l-t[0])*(u-f);return Math.abs(.5*n*e)}),s=h.indexOf(n.max(h)),d=a[s];return l=d[0],f=d[1],r[s]});return[].concat([i[0]],h,[i[i.length-1]])};return w(i,r,"bucketSize"),i.x=function(n){return arguments.length?(t=n,i):t},i.y=function(t){return arguments.length?(e=t,i):e},i},ot=function(){var t=et(),e=function(t){return t},r=function(r){if(t.bucketSize()>r.length)return r;var i=n.extent(r,e),o=t(r.slice(1,r.length-1)),u=o.map(function(t,n){var r,o,u={},a=!0,c=t.map(e),l=c.filter(function(t){return t===i[0]||t===i[1]}).map(function(t){return c.indexOf(t)})[0];return void 0!==l?t[l]:(c.forEach(function(t,n){void 0===u[t]&&(u[t]=0),u[t]++,u[t]>u[r]||void 0===r?(r=t,o=n,a=!0):u[t]===u[r]&&(a=!1)}),a?t[o]:t[Math.floor(t.length/2)])});return[].concat([r[0]],u,[r[r.length-1]])};return w(r,t,"bucketSize"),r.value=function(t){return arguments.length?(e=t,r):e},r},ut=function(t){return"function"==typeof t?t:function(){return t}},at=function(){var t=null,n=function(t){return t.date},e=function(t){return t.open},r=function(t){return t.high},i=function(t){return t.low},o=function(t){return t.close},a="vertical",c=ut(3),l=function(l){var f=t||u.path();return l.forEach(function(t,u){var l=n(t,u),h=e(t,u),s=r(t,u),d=i(t,u),g=o(t,u),v=c(t,u)/2;"vertical"===a?(f.moveTo(l,d),f.lineTo(l,s),f.moveTo(l,h),f.lineTo(l-v,h),f.moveTo(l,g),f.lineTo(l+v,g)):(f.moveTo(d,l),f.lineTo(s,l),f.moveTo(h,l),f.lineTo(h,l+v),f.moveTo(g,l),f.lineTo(g,l-v))}),t?null:f.toString()};return l.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.x=function(){return arguments.length?(n=ut(arguments.length<=0?void 0:arguments[0]),l):n},l.open=function(){return arguments.length?(e=ut(arguments.length<=0?void 0:arguments[0]),l):e},l.high=function(){return arguments.length?(r=ut(arguments.length<=0?void 0:arguments[0]),l):r},l.low=function(){return arguments.length?(i=ut(arguments.length<=0?void 0:arguments[0]),l):i},l.close=function(){return arguments.length?(o=ut(arguments.length<=0?void 0:arguments[0]),l):o},l.width=function(){return arguments.length?(c=ut(arguments.length<=0?void 0:arguments[0]),l):c},l.orient=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],l):a},l},ct=function(){var t=null,n=function(t){return t.x},e=function(t){return t.y},r="center",i="center",o=function(t){return t.height},a=ut(3),c=function(c,l){var f=t||u.path();return c.forEach(function(t,u){var c=n.call(this,t,l||u),h=e.call(this,t,l||u),s=o.call(this,t,l||u),d=a.call(this,t,l||u),g=void 0;switch(r){case"left":g=d;break;case"right":g=0;break;case"center":g=d/2;break;default:throw new Error("Invalid horizontal alignment "+r)}var v=void 0;switch(i){case"bottom":v=-s;break;case"top":v=0;break;case"center":v=s/2;break;default:throw new Error("Invalid vertical alignment "+i)}f.rect(c-g,h-v,d,s)},this),t?null:f.toString()};return c.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],c):t},c.x=function(){return arguments.length?(n=ut(arguments.length<=0?void 0:arguments[0]),c):n},c.y=function(){return arguments.length?(e=ut(arguments.length<=0?void 0:arguments[0]),c):e},c.width=function(){return arguments.length?(a=ut(arguments.length<=0?void 0:arguments[0]),c):a},c.horizontalAlign=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],c):r},c.height=function(){return arguments.length?(o=ut(arguments.length<=0?void 0:arguments[0]),c):o},c.verticalAlign=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],c):i},c},lt=function(){var t=null,n=function(t){return t.date},e=function(t){return t.open},r=function(t){return t.high},i=function(t){return t.low},o=function(t){return t.close},a=ut(3),c=function(c){var l=t||u.path();return c.forEach(function(t,u){var c=n(t,u),f=e(t,u),h=r(t,u),s=i(t,u),d=o(t,u),g=a(t,u),v=g/2;l.rect(c-v,f,g,d-f),l.moveTo(c,Math.min(d,f)),l.lineTo(c,h),l.moveTo(c,Math.max(d,f)),l.lineTo(c,s)}),t?null:l.toString()};return c.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],c):t},c.x=function(){return arguments.length?(n=ut(arguments.length<=0?void 0:arguments[0]),c):n},c.open=function(){return arguments.length?(e=ut(arguments.length<=0?void 0:arguments[0]),c):e},c.high=function(){return arguments.length?(r=ut(arguments.length<=0?void 0:arguments[0]),c):r},c.low=function(){return arguments.length?(i=ut(arguments.length<=0?void 0:arguments[0]),c):i},c.close=function(){return arguments.length?(o=ut(arguments.length<=0?void 0:arguments[0]),c):o},c.width=function(){return arguments.length?(a=ut(arguments.length<=0?void 0:arguments[0]),c):a},c},ft=function(){var t=null,n=function(t){return t.value},e=function(t){return t.median},r=function(t){return t.upperQuartile},i=function(t){return t.lowerQuartile},o=function(t){return t.high},a=function(t){return t.low},c="vertical",l=ut(5),f=ut(.5),h=function(h){var s=t||u.path();return h.forEach(function(t,u){var h=n(t,u),d=l(t,u),g=d/2,v=d*f(t,u),p=v/2,m=o(t,u),y=r(t,u),b=e(t,u),w=i(t,u),x=a(t,u),T=w-y;"vertical"===c?(s.moveTo(h-p,m),s.lineTo(h+p,m),s.moveTo(h,m),s.lineTo(h,y),s.rect(h-g,y,d,T),s.moveTo(h-g,b),s.lineTo(h+g,b),s.moveTo(h,w),s.lineTo(h,x),s.moveTo(h-p,x),s.lineTo(h+p,x)):(s.moveTo(x,h-p),s.lineTo(x,h+p),s.moveTo(x,h),s.lineTo(w,h),s.rect(w,h-g,-T,d),s.moveTo(b,h-g),s.lineTo(b,h+g),s.moveTo(y,h),s.lineTo(m,h),s.moveTo(m,h-p),s.lineTo(m,h+p))}),t?null:s.toString()};return h.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],h):t},h.value=function(){return arguments.length?(n=ut(arguments.length<=0?void 0:arguments[0]),h):n},h.median=function(){return arguments.length?(e=ut(arguments.length<=0?void 0:arguments[0]),h):e},h.upperQuartile=function(){return arguments.length?(r=ut(arguments.length<=0?void 0:arguments[0]),h):r},h.lowerQuartile=function(){return arguments.length?(i=ut(arguments.length<=0?void 0:arguments[0]),h):i},h.high=function(){return arguments.length?(o=ut(arguments.length<=0?void 0:arguments[0]),h):o},h.low=function(){return arguments.length?(a=ut(arguments.length<=0?void 0:arguments[0]),h):a},h.width=function(){return arguments.length?(l=ut(arguments.length<=0?void 0:arguments[0]),h):l},h.orient=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h.cap=function(){return arguments.length?(f=ut(arguments.length<=0?void 0:arguments[0]),h):f},h},ht=function(){var t=null,n=function(t){return t.x},e=function(t){return t.high},r=function(t){return t.low},i="vertical",o=ut(5),a=function(a){var c=t||u.path();return a.forEach(function(t,u){var a=n(t,u),l=o(t,u),f=l/2,h=e(t,u),s=r(t,u);"vertical"===i?(c.moveTo(a-f,h),c.lineTo(a+f,h),c.moveTo(a,h),c.lineTo(a,s),c.moveTo(a-f,s),c.lineTo(a+f,s)):(c.moveTo(s,a-f),c.lineTo(s,a+f),c.moveTo(s,a),c.lineTo(h,a),c.moveTo(h,a-f),c.lineTo(h,a+f))}),t?null:c.toString()};return a.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.value=function(){return arguments.length?(n=ut(arguments.length<=0?void 0:arguments[0]),a):n},a.high=function(){return arguments.length?(e=ut(arguments.length<=0?void 0:arguments[0]),a):e},a.low=function(){return arguments.length?(r=ut(arguments.length<=0?void 0:arguments[0]),a):r},a.width=function(){return arguments.length?(o=ut(arguments.length<=0?void 0:arguments[0]),a):o},a.orient=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a},st=function(t){return"function"==typeof t?t:function(){return t}},dt=1e-6,gt=function(t,n){t=t||"g";var e=function(t,n){return n},r=function(r,i){i=i||function(t){return t};var o=null==n?t:t+"."+n,u=r.selectAll(o).filter(function(){return this.parentNode===r.node()}),c=u.data(i,e),l=c.enter().insert(t).attr("class",n),f=c.exit();return c=c.merge(l),a.selection.prototype.transition&&(l.style("opacity",dt),c.transition().style("opacity",1),f.transition().style("opacity",dt)),f.remove(),c.enter=function(){return l},c.exit=function(){return f},c};return r.element=function(n){return arguments.length?(t=n,r):t},r.className=function(t){return arguments.length?(n=t,r):n},r.key=function(t){return arguments.length?(e=t,r):e},r},vt=function(t){var n=function(){},e=function(){return[0,0]},r=function(t,n){return[t.x,t.y]},i=t||function(t){return t},o=function(){},u=gt("g","label"),c=function(t){t.each(function(t,c,l){var f=u(a.select(l[c]),t).call(o),h=f.nodes(),s=h.map(function(t,n){var i=a.select(t).datum(),o=r(i,n,h),u=e(i,n,h);return{hidden:!1,x:o[0],y:o[1],width:u[0],height:u[1]}}),d=i(s);f.attr("style",function(t,n){return"display:"+(d[n].hidden?"none":"inherit")}).attr("transform",function(t,n){return"translate("+d[n].x+", "+d[n].y+")"}).attr("layout-width",function(t,n){return d[n].width}).attr("layout-height",function(t,n){return d[n].height}).attr("anchor-x",function(t,n,e){return r(t,n,e)[0]-d[n].x}).attr("anchor-y",function(t,n,e){return r(t,n,e)[1]-d[n].y}),f.call(o),n(f,t,c)})};return T(c,u,M("key")),T(c,i),c.size=function(){return arguments.length?(e=st(arguments.length<=0?void 0:arguments[0]),c):e},c.position=function(){return arguments.length?(r=st(arguments.length<=0?void 0:arguments[0]),c):r},c.component=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],c):o},c.decorate=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],c):n},c},pt=function(t){var n=2,e=function(t){return t},r=gt("text"),i=gt("rect"),o=gt("circle"),u=function(t){t.each(function(t,u,c){var l=c[u],f=a.select(l),h=Number(l.getAttribute("layout-width")),s=Number(l.getAttribute("layout-height")),d=i(f,[t]);d.attr("width",h).attr("height",s);var g=Number(l.getAttribute("anchor-x")),v=Number(l.getAttribute("anchor-y")),p=o(f,[t]);p.attr("r",2).attr("cx",g).attr("cy",v);var m=r(f,[t]);m.enter().attr("dy","0.9em").attr("transform","translate("+n+", "+n+")"),m.text(e)})};return u.padding=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},u.value=function(){return arguments.length?(e=st(arguments.length<=0?void 0:arguments[0]),u):e},u},mt=function(t,n){return!(t.x>=n.x+n.width||t.x+t.width<=n.x||t.y>=n.y+n.height||t.y+t.height<=n.y)},yt=function(t,n){if(mt(t,n)){var e=Math.max(t.x,n.x),r=Math.min(t.x+t.width,n.x+n.width),i=Math.max(t.y,n.y),o=Math.min(t.y+t.height,n.y+n.height);return(r-e)*(o-i)}return 0},bt=function(t,e){return n.sum(t.map(function(n,r){return e===r?0:yt(t[e],n)}))},wt=function(t,n,e,r,i){return{x:t,y:n,width:e,height:r,location:i}},xt=function(t){var n=t.x,e=t.y,r=t.width,i=t.height;return[wt(n,e,r,i,"bottom-right"),wt(n-r,e,r,i,"bottom-left"),wt(n-r,e-i,r,i,"top-left"),wt(n,e-i,r,i,"top-right"),wt(n,e-i/2,r,i,"middle-right"),wt(n-r/2,e,r,i,"bottom-center"),wt(n-r,e-i/2,r,i,"middle-left"),wt(n-r/2,e-i,r,i,"top-center")]},Tt=function(t,n,e){return[].concat(R(t.slice(0,n)),[e],R(t.slice(n+1)))},Et=function(t,n){return t<n},St=function t(){var e=null,r=Et,i=function(){return 0},o=void 0,u=function(t,n){return e-i(o[n],n,o)+i(t,n,Tt(o,n,t))},a=function a(c,l){e||(e=n.sum(o.map(function(t,n){return i(t,n,o)})));var f=u(c,l);return r(f,e)?t().locationScore(i).winningScore(r).score(f).rectangles(Tt(o,l,c)):a};return a.rectangles=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a.score=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.winningScore=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],
a):r},a.locationScore=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a},Mt=function(){var t=void 0,n=function(n){return t?n.width*n.height-yt(n,t):0},e=function(t,e,r){return bt(r,e)+n(t)},r=function(t){var n=St().locationScore(e).rectangles(t);return t.forEach(function(t,e){xt(t).forEach(function(t,r){n=n(t,e)})}),n.rectangles()};return r.bounds=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r},kt=function(t){return t[Lt(t)]},Lt=function(t){return Math.floor(Math.random()*t.length)},At=function(){var t=1e3,n=1,e=void 0,r=function(t){switch(t.location){case"bottom-right":return 0;case"middle-right":case"bottom-center":return t.width*t.height/8}return t.width*t.height/4},i=function(t){return e?t.width*t.height-yt(t,e):0},o=function(t,n,e){return bt(e,n)+i(t)+r(t)},u=function(e){for(var r=t,i=function(t,n){return Math.exp((n-t)/r)>Math.random()},u=St().locationScore(o).winningScore(i).rectangles(e);r>0;){var a=Lt(e),c=kt(xt(e[a]));u=u(c,a),r-=n}return u.rectangles()};return u.temperature=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.cooling=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},u.bounds=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u},Ht=function(t,e){return t[n.scan(t,e)]},Ot=function(t){t=t||function(t){return t};var n=function(n){n=t(n);for(var e=function(){var t=n.filter(function(t){return!t.hidden}),e=t.map(function(n,e){return[n,bt(t,e)]}),r=Ht(e,function(t,n){return n[1]-t[1]});return r[1]>0?void(r[0].hidden=!0):"break"};;){var r=e();if("break"===r)break}return n};return T(n,t),n},_t=function(){var t=[0,0],n=function(n){return n.map(function(n,e){var r=n.x,i=n.y;return r+n.width>t[0]&&(r-=n.width),i+n.height>t[1]&&(i-=n.height),{height:n.height,width:n.width,x:r,y:i}})};return n.bounds=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},Ct=1e-6,Dt=function(t,n){t=t||"g";var e=function(t,n){return n},r=null,i=function(i,o){o=o||function(t){return t};var u=i.selection?i:null;u&&(i=i.selection());var a=i.selectAll(function(t,n,e){return Array.from(e[n].childNodes).filter(function(t){return 1===t.nodeType})}).filter(null==n?t:t+"."+n),c=a.data(o,e),l=c.enter().append(t).attr("class",n),f=c.exit();c=c.merge(l);var h=u||r;return h?(c=c.transition(h),l.style("opacity",Ct).transition(h).style("opacity",1),f=f.transition(h).style("opacity",Ct).remove()):f.remove(),c.enter=function(){return l},c.exit=function(){return f},c};return i.element=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.className=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.key=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.transition=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i},Nt=function(t){return function(e){if(e.length<=1)return 10;e.sort();var r=n.pairs(e).map(function(t){return Math.abs(t[0]-t[1])}),i=n.min(r);return t*i}},It=function(t){return"function"==typeof t?t:function(){return t}},Vt=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(){return 0},i=function(t){return t.x},o=function(t){return t.y},u=function(){},a=Nt(.75),c="vertical",l=function(){};return l.defined=function(t,n){return m(r,i,o)(t,n)},l.values=function(e,u){if("vertical"===c){var a=n(o(e,u)),l=n(r(e,u)),f=t(i(e,u));return{d:e,x:f,y:a,y0:l,height:a-l,origin:[f,a],baseOrigin:[f,l],transposedX:f,transposedY:a}}var h=t(o(e,u)),s=t(r(e,u)),d=n(i(e,u));return{d:e,x:d,y:h,y0:s,height:h-s,origin:[h,d],baseOrigin:[s,d],transposedX:h,transposedY:d}},l.decorate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],l):u},l.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.baseValue=function(){return arguments.length?(r=It(arguments.length<=0?void 0:arguments[0]),l):r},l.crossValue=function(){return arguments.length?(i=It(arguments.length<=0?void 0:arguments[0]),l):i},l.mainValue=function(){return arguments.length?(o=It(arguments.length<=0?void 0:arguments[0]),l):o},l.barWidth=function(){return arguments.length?(a=It(arguments.length<=0?void 0:arguments[0]),l):a},l.orient=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],l):c},l},Pt="#c60",zt="#6c0",Rt="#000",Ft="#ddd",Ut="#999",Bt={red:Pt,green:zt,black:Rt,gray:Ft,darkGray:Ut},qt=function(){var t=Vt(),n=c.line().defined(t.defined).x(function(n,e){return t.values(n,e).transposedX}).y(function(n,e){return t.values(n,e).transposedY}),e=Dt("path","line"),r=function(r){r.selection&&e.transition(r),r.each(function(r,i,o){var u=e(a.select(o[i]),[r]);u.attr("d",n).attr("fill","none").attr("stroke",Bt.black),t.decorate()(u,r,i)})};return T(r,t,S("baseValue","barWidth")),w(r,e,"key"),w(r,n,"curve"),r},Wt=function(){var t=Vt(),n=c.line().defined(t.defined).x(function(n,e){return t.values(n,e).transposedX}).y(function(n,e){return t.values(n,e).transposedY}),e=function(e){var r=n.context();r.beginPath(),n(e),r.strokeStyle=Bt.black,t.decorate()(r,e),r.stroke(),r.closePath()};return T(e,t,S("baseValue","barWidth")),w(e,n,"curve","context"),e},jt=function(){var t=c.symbol(),n=Vt(),e=Dt("g","point"),r=function(t){return"translate("+t[0]+", "+t[1]+")"},i=function(i){i.selection&&e.transition(i),i.each(function(i,o,u){var c=i.filter(n.defined),l=e(a.select(u[o]),c);l.enter().attr("transform",function(t,e){return r(n.values(t,e).origin)}).attr("fill",Bt.gray).attr("stroke",Bt.black).append("path"),l.attr("transform",function(t,e){return r(n.values(t,e).origin)}).select("path").attr("d",t),n.decorate()(l,i,o)})};return T(i,n,S("baseValue","barWidth")),w(i,e,"key"),w(i,t,"type","size"),i},Qt=function(){var t=c.symbol(),n=Vt(),e=function(e){var r=e.filter(n.defined),i=t.context();r.forEach(function(r,o){i.save();var u=n.values(r,o);i.translate(u.origin[0],u.origin[1]),i.beginPath(),t(e),i.strokeStyle=Bt.black,i.fillStyle=Bt.gray,n.decorate()(i,r,o),i.stroke(),i.fill(),i.closePath(),i.restore()})};return T(e,n,S("baseValue","barWidth")),w(e,t,"size","type","context"),e},Gt=function(){var t=ct().x(0).y(0),n=Vt(),e=Dt("g","bar"),r=function(t){return"vertical"===n.orient()?t.height:t.width},i=function(t){return"vertical"===n.orient()?t.width:t.height},o=function(t){return"translate("+t[0]+", "+t[1]+")"},u=function(u){u.selection&&e.transition(u),u.each(function(u,c,l){var f=n.orient();if("vertical"!==f&&"horizontal"!==f)throw new Error("The bar series does not support an orientation of "+f);var h=u.filter(n.defined),s=h.map(n.values);t.width(0).height(0),"vertical"===n.orient()?(t.verticalAlign("top"),t.horizontalAlign("center")):(t.horizontalAlign("right"),t.verticalAlign("center"));var d=n.barWidth()(s.map(function(t){return t.x}));i(t)(d);var g=e(a.select(l[c]),h);g.enter().attr("transform",function(t,n){return o(s[n].baseOrigin)}).attr("class","bar "+n.orient()).attr("fill",Bt.darkGray).append("path").attr("d",function(n){return t([n])}),g.attr("transform",function(t,n){return o(s[n].origin)}).select("path").attr("d",function(n,e){return r(t)(-s[e].height),t([n])}),n.decorate()(g,h,c)})};return T(u,n),w(u,e,"key"),u},Yt=function(){var t=Vt(),n=ct().x(0).y(0),e=function(n){return"vertical"===t.orient()?n.height:n.width},r=function(n){return"vertical"===t.orient()?n.width:n.height},i=function(i){var o=n.context(),u=i.filter(t.defined),a=u.map(t.values),c=t.barWidth()(a.map(function(t){return t.x}));r(n)(c),"vertical"===t.orient()?(n.verticalAlign("top"),n.horizontalAlign("center")):(n.horizontalAlign("right"),n.verticalAlign("center")),a.forEach(function(r,i){o.save(),o.beginPath(),o.translate(r.origin[0],r.origin[1]),e(n)(-r.height),n([r]),o.fillStyle=Bt.darkGray,t.decorate()(o,r.d,i),o.fill(),o.closePath(),o.restore()})};return T(i,t),w(i,n,"context"),i},Xt=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(t){return t.high},i=function(t){return t.low},o=function(t){return t.cross},u="vertical",a=Nt(.5),c=function(){},l=function(){};return l.defined=function(t,n){return m(i,r,o)(t,n)},l.computeBarWidth=function(e){var r="vertical"===u?t:n;return a(e.map(function(t,n){return r(o(t,n))}))},l.values=function(e,a){if("vertical"===u){var c=n(r(e,a));return{origin:[t(o(e,a)),c],high:0,low:n(i(e,a))-c}}var l=t(i(e,a));return{origin:[l,n(o(e,a))],high:t(r(e,a))-l,low:0}},l.decorate=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],l):c},l.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],l):u},l.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.lowValue=function(){return arguments.length?(i=It(arguments.length<=0?void 0:arguments[0]),l):i},l.highValue=function(){return arguments.length?(r=It(arguments.length<=0?void 0:arguments[0]),l):r},l.crossValue=function(){return arguments.length?(o=It(arguments.length<=0?void 0:arguments[0]),l):o},l.barWidth=function(){return arguments.length?(a=It(arguments.length<=0?void 0:arguments[0]),l):a},l.decorate=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],l):c},l},Zt=function(){var t=Xt(),n=Dt("g","error-bar"),e=ht().value(0),r=function(t){return function(n){return t.selection?n.transition(t):n}},i=function(t){return"translate("+t.origin[0]+", "+t.origin[1]+")"},o=function(o){o.selection&&n.transition(o);var u=r(o);o.each(function(r,o,c){var l=r.filter(t.defined),f=l.map(t.values),h=n(a.select(c[o]),l);h.enter().attr("stroke",Bt.black).attr("fill",Bt.gray).attr("transform",function(n,e){return i(t.values(n,e))+" scale(1e-6, 1)"}).append("path");var s=t.computeBarWidth(l);e.orient(t.orient()).width(s),h.each(function(t,n,r){var o=f[n];e.high(o.high).low(o.low),u(a.select(r[n])).attr("transform",i(o)+" scale(1)").select("path").attr("d",e([t]))}),t.decorate()(h,r,o)})};return T(o,t),w(o,n,"key"),o},Kt=function(){var t=Xt(),n=ht().value(0),e=function(e){var r=e.filter(t.defined),i=n.context(),o=t.computeBarWidth(r);n.orient(t.orient()).width(o),r.forEach(function(e,r){i.save();var o=t.values(e,r);i.translate(o.origin[0],o.origin[1]),i.beginPath(),n.high(o.high).low(o.low)([e]),i.strokeStyle=Bt.black,i.fillStyle=Bt.gray,t.decorate()(i,e,r),i.stroke(),i.fill(),i.closePath(),i.restore()})};return T(e,t),w(e,n,"context"),e},$t=function(){var t=Vt(),n=c.area().defined(t.defined),e=Dt("path","area"),r=function(r){r.selection&&e.transition(r),r.each(function(r,i,o){var u=r.map(t.values);n.x(function(t,n){return u[n].transposedX}).y(function(t,n){return u[n].transposedY});var c="vertical"===t.orient()?"y":"x";n[c+"0"](function(t,n){return u[n].y0}),n[c+"1"](function(t,n){return u[n].y});var l=e(a.select(o[i]),[r]);l.attr("d",n).attr("fill",Bt.gray),t.decorate()(l,r,i)})};return T(r,t,S("barWidth")),w(r,e,"key"),w(r,n,"curve"),r},Jt=function(){var t=Vt(),n=c.area().defined(t.defined),e=function(e){var r=n.context(),i=e.map(t.values);n.x(function(t,n){return i[n].transposedX}).y(function(t,n){return i[n].transposedY});var o="vertical"===t.orient()?"y":"x";n[o+"0"](function(t,n){return i[n].y0}),n[o+"1"](function(t,n){return i[n].y}),r.beginPath(),n(e),r.fillStyle=Bt.gray,t.decorate()(r,e),r.fill(),r.closePath()};return T(e,t,S("barWidth")),w(e,n,"curve","context"),e},tn=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(t){return t.date},i=function(t){return t.open},o=function(t){return t.high},u=function(t){return t.low},a=function(t){return t.close},c=Nt(.75),l=function(){},f=function(n,e){return t(r(n,e))},h=function(){};return h.width=function(t){return c(t.map(f))},h.defined=function(t,n){return m(r,i,u,o,a)(t,n)},h.values=function(t,e){var r=a(t,e),c=i(t,e),l="";return r>c?l="up":r<c&&(l="down"),{cross:f(t,e),open:n(c),high:n(o(t,e)),low:n(u(t,e)),close:n(r),direction:l}},h.decorate=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},h.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],h):t},h.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],h):n},h.crossValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],h):r},h.openValue=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],h):i},h.highValue=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],h):o},h.lowValue=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],h):u},h.yValue=h.closeValue=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],h):a},h.barWidth=function(){return arguments.length?(c=It(arguments.length<=0?void 0:arguments[0]),h):c},h},nn=function(t,n){var e=tn(),r=Dt("g",n),i=function(t){return"translate("+t.cross+", "+t.high+")"},o=function(t){return function(n){return t.selection?n.transition(t):n}},u=function(u){u.selection&&r.transition(u);var c=o(u);u.each(function(o,u,l){var f=o.filter(e.defined);t.width(e.width(f));var h=r(a.select(l[u]),f);h.enter().attr("transform",function(t,n){return i(e.values(t,n))+" scale(1e-6, 1)"}).append("path"),h.each(function(r,o,u){var l=e.values(r,o),f="up"===l.direction?Bt.green:Bt.red,h=c(a.select(u[o])).attr("class",n+" "+l.direction).attr("stroke",f).attr("fill",f).attr("transform",function(){return i(l)+" scale(1)"});t.x(0).open(function(){return l.open-l.high}).high(0).low(function(){return l.low-l.high}).close(function(){return l.close-l.high}),h.select("path").attr("d",t([r]))}),e.decorate()(h,o,u)})};return w(u,r,"key"),T(u,e),u},en=function(){return nn(lt(),"candlestick")},rn=function(t){var n=tn(),e=function(e){var r=e.filter(n.defined);t.width(n.width(r));var i=t.context();r.forEach(function(e,r){i.save();var o=n.values(e,r);i.translate(o.cross,o.high),i.beginPath(),t.x(0).open(function(){return o.open-o.high}).high(0).low(function(){return o.low-o.high}).close(function(){return o.close-o.high})([e]);var u="up"===o.direction?Bt.green:Bt.red;i.strokeStyle=u,i.fillStyle=u,n.decorate()(i,e,r),i.stroke(),i.fill(),i.closePath(),i.restore()})};return w(e,t,"context"),T(e,n),e},on=function(){return rn(lt())},un=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(t){return t.upperQuartile},i=function(t){return t.lowerQuartile},o=function(t){return t.high},u=function(t){return t.low},a=function(t){return t.value},c=function(t){return t.median},l="vertical",f=Nt(.5),h=function(){},s=function(){};return s.defined=function(t,n){return m(u,o,i,r,a,c)(t,n)},s.computeBarWidth=function(e){var r="vertical"===l?t:n;return f(e.map(function(t,n){return r(a(t,n))}))},s.values=function(e,f){if("vertical"===l){var h=n(o(e,f));return{origin:[t(a(e,f)),h],high:0,upperQuartile:n(r(e,f))-h,median:n(c(e,f))-h,lowerQuartile:n(i(e,f))-h,low:n(u(e,f))-h}}var s=t(u(e,f));return{origin:[s,n(a(e,f))],high:t(o(e,f))-s,upperQuartile:t(r(e,f))-s,median:t(c(e,f))-s,lowerQuartile:t(i(e,f))-s,low:0}},s.decorate=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],s):h},s.orient=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],s):l},s.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n},s.lowerQuartileValue=function(){return arguments.length?(i=It(arguments.length<=0?void 0:arguments[0]),s):i},s.upperQuartileValue=function(){return arguments.length?(r=It(arguments.length<=0?void 0:arguments[0]),s):r},s.lowValue=function(){return arguments.length?(u=It(arguments.length<=0?void 0:arguments[0]),s):u},s.highValue=function(){return arguments.length?(o=It(arguments.length<=0?void 0:arguments[0]),s):o},s.crossValue=function(){return arguments.length?(a=It(arguments.length<=0?void 0:arguments[0]),s):a},s.medianValue=function(){return arguments.length?(c=It(arguments.length<=0?void 0:arguments[0]),s):c},s.barWidth=function(){return arguments.length?(f=It(arguments.length<=0?void 0:arguments[0]),s):f},s.decorate=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],s):h},s},an=function(){var t=un(),n=Dt("g","box-plot"),e=ft().value(0),r=function(t){return function(n){return t.selection?n.transition(t):n}},i=function(t){return"translate("+t.origin[0]+", "+t.origin[1]+")"},o=function(o){o.selection&&n.transition(o);var u=r(o);o.each(function(r,o,c){var l=r.filter(t.defined),f=n(a.select(c[o]),l);f.enter().attr("stroke",Bt.black).attr("fill",Bt.gray).attr("transform",function(n,e){return i(t.values(n,e))+" scale(1e-6, 1)"}).append("path");var h=t.computeBarWidth(l);e.orient(t.orient()).width(h),f.each(function(n,r,o){var c=t.values(n,r);e.median(c.median).upperQuartile(c.upperQuartile).lowerQuartile(c.lowerQuartile).high(c.high).low(c.low),u(a.select(o[r])).attr("transform",i(c)).select("path").attr("d",e([n]))}),t.decorate()(f,r,o)})};return T(o,t),w(o,n,"key"),w(o,e,"cap"),o},cn=function(){var t=un(),n=ft().value(0),e=function(e){var r=e.filter(t.defined),i=n.context(),o=t.computeBarWidth(r);n.orient(t.orient()).width(o),r.forEach(function(e,r){i.save();var o=t.values(e,r);i.translate(o.origin[0],o.origin[1]),i.beginPath(),n.median(o.median).upperQuartile(o.upperQuartile).lowerQuartile(o.lowerQuartile).high(o.high).low(o.low)([e]),i.strokeStyle=Bt.black,i.fillStyle=Bt.gray,t.decorate()(i,e,r),i.stroke(),i.fill(),i.closePath(),i.restore()})};return T(e,t),w(e,n,"cap","context"),e},ln=function(){return nn(at(),"ohlc")},fn=function(){return rn(at())},hn=function(){var t=function(){},n=e.scaleIdentity(),r=e.scaleIdentity(),i=[],o=function(t){return t},u=function(t,n){return n},a=function(){};return a.mapping=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a.key=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],a):u},a.series=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.yScale=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.decorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a},sn=function(){var t=hn(),n=Dt("g"),e=Dt("g","multi"),r=function(r){r.selection&&(e.transition(r),n.transition(r));var i=t.mapping(),o=t.series(),u=t.xScale(),c=t.yScale();r.each(function(r,l,f){var h=e(a.select(f[l]),o);h.each(function(t,e,l){t.xScale(u).yScale(c);var f=i(r,e,o),h=n(a.select(l[e]),[f]);h.call(t)});var s=h.selection?h.selection():h;s.order(),t.decorate()(h,r,l)})};return T(r,t),w(r,e,"key"),r},dn=function(){var t=null,n=hn(),e=function(e){var r=n.mapping(),i=n.series(),o=n.xScale(),u=n.yScale();i.forEach(function(a,c){var l=r(e,c,i);a.context(t).xScale(o).yScale(u);var f=a.decorate();a.decorate(function(t,r,i){n.decorate()(t,e,c),f(t,r,i)}),a(l),a.decorate(f)})};return e.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],e):t},T(e,n),e},gn=function(t){var r=Nt(.75),i=function(){},o=e.scaleLinear(),u=e.scaleBand(),a=function(){},c=function(n){if(!n.length)return 0;var e=n[0],i=t.crossValue(),u=function(t,n){return o(i(t,n))},a=r(e.map(u));return a};return a.configureOffsetScale=function(e){var r=c(e),i=r/2;u.domain(n.range(0,e.length)).range([-i,i]),t.barWidth&&t.barWidth(u.bandwidth())},a.offsetScale=function(){return u},a.groupWidth=function(){return arguments.length?(r=It(arguments.length<=0?void 0:arguments[0]),a):r},a.decorate=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a.xScale=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},T(a,u,k({paddingInner:"subPadding"})),a},vn=function(t){var n=gn(t),e=Dt("g","grouped"),r=function(r){r.selection&&e.transition(r),r.each(function(r,i,o){n.configureOffsetScale(r);var u=e(a.select(o[i]),r);u.enter().append("g"),u.select("g").each(function(e,r,i){var o=a.select(i[r]),u=function(t){return n.xScale()(t)+n.offsetScale()(r)+n.offsetScale().bandwidth()/2};t.xScale(u),t.decorate(function(t,e){return n.decorate()(t,e,r)}),o.call(t)})})};return T(r,t,S("decorate","xScale")),T(r,n,S("configureOffsetScale","configureOffset")),r},pn=function(t){var n=gn(t),e=function(e){n.configureOffsetScale(e),e.forEach(function(e,r){var i=function(t){return n.xScale()(t)+n.offsetScale()(r)+n.offsetScale().bandwidth()/2};t.xScale(i),t.decorate(function(t,e){return n.decorate()(t,e,r)}),t(e)})};return T(e,t,S("decorate","xScale")),T(e,n,S("configureOffsetScale","configureOffset")),e},mn=function(){var t="vertical",n=qt(),e=sn(),r=function(r){return r.each(function(r,i,o){"vertical"===t?e.series(r[0].map(function(t){return n})).mapping(function(t,n){return t.map(function(t){return t[n]})}):e.series(r.map(function(t){return n})).mapping(function(t,n){return t[n]}),a.select(o[i]).call(e)})};return r.series=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n},r.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},T(r,e,S("series","mapping")),r},yn=function(){var t="vertical",n=Wt(),e=dn(),r=function(r){"vertical"===t?e.series(r[0].map(function(t){return n})).mapping(function(t,n){return t.map(function(t){return t[n]})}):e.series(r.map(function(t){return n})).mapping(function(t,n){return t[n]}),e(r)};return r.series=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n},r.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},T(r,e,S("series","mapping")),r},bn=function(t){return"function"==typeof t?t:function(){return t}},wn=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r="horizontal",i=function(t){return t.from},o=function(t){return t.to},u=function(){},c=Dt("g","annotation-band"),l=ct().horizontalAlign("center").verticalAlign("center").x(0).y(0),f=function(e){if(e.selection&&c.transition(e),"horizontal"!==r&&"vertical"!==r)throw new Error("Invalid orientation");var f="horizontal"===r,h=f?function(t,n){return"translate("+t+", "+n+")"}:function(t,n){return"translate("+n+", "+t+")"},s=f?t:n,d=f?n:t,g=s.range(),v=g[1]-g[0],p=f?"height":"width",m=f?"width":"height",y=function(){return h((g[1]+g[0])/2,(d(o.apply(void 0,arguments))+d(i.apply(void 0,arguments)))/2)};l[m](v),l[p](function(){return d(o.apply(void 0,arguments))-d(i.apply(void 0,arguments))}),e.each(function(t,n,e){var i=c(a.select(e[n]),t);i.enter().attr("transform",y).append("path").classed("band",!0),i.attr("class","annotation-band "+r).attr("transform",y).select("path").attr("d",function(t,n){return l([t],n)}),u(i,t,n)})};return f.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],f):t},f.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],f):n},f.orient=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],f):r},f.decorate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],f):u},f.fromValue=function(){return arguments.length?(i=bn(arguments.length<=0?void 0:arguments[0]),f):i},f.toValue=function(){return arguments.length?(o=bn(arguments.length<=0?void 0:arguments[0]),f):o},f},xn=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(t){return t},i=r,o=function(){},u="horizontal",c=Dt("g","annotation-line"),l=function(e){if(e.selection&&c.transition(e),"horizontal"!==u&&"vertical"!==u)throw new Error("Invalid orientation");var l="horizontal"===u,f=l?function(t,n){return"translate("+t+", "+n+")"}:function(t,n){return"translate("+n+", "+t+")"},h=l?"x2":"y2",s=l?t:n,d=l?n:t,g=l?"left-handle":"bottom-handle",v=l?"right-handle":"top-handle",p=l?"9":"0",m=l?"0":"9",y=l?"0.32em":"0.71em",b=l?"start":"middle",w=s.range(),x=function(){return f(w[0],d(r.apply(void 0,arguments)))},T=w[1]-w[0];e.each(function(t,n,e){var r=c(a.select(e[n]),t),l=r.enter().attr("transform",x).style("stroke","#bbb");l.append("line").attr(h,T),l.append("g").classed(g,!0).style("stroke","none"),l.append("g").classed(v,!0).style("stroke","none").attr("transform",f(T,0)).append("text").attr("text-anchor",b).attr("x",p).attr("y",m).attr("dy",y),r.attr("class","annotation-line "+u),r.attr("transform",x),r.select("line").attr(h,T),r.select("g."+v).attr("transform",f(T,0)),r.select("text").text(i),o(r,t,n)})};return l.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.value=function(){return arguments.length?(r=bn(arguments.length<=0?void 0:arguments[0]),l):r},l.label=function(){return arguments.length?(i=bn(arguments.length<=0?void 0:arguments[0]),l):i},l.decorate=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],l):o},l.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],l):u},l},Tn=function(t){return function(e){if(e.length<=1)return 10;e.sort();var r=n.pairs(e).map(function(t){return Math.abs(t[0]-t[1])}),i=n.min(r);return t*i}},En=function(t){return"function"==typeof t?t:function(){return t}},Sn=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(){return 0},i=function(t){return t.x},o=function(t){return t.y},u=function(){},a=Tn(.75),c="vertical",l=function(){};return l.defined=function(t,n){return y(r,i,o)(t,n)},l.values=function(e,u){if("vertical"===c){var a=n(o(e,u)),l=n(r(e,u)),f=t(i(e,u));return{d:e,x:f,y:a,y0:l,height:a-l,origin:[f,a],baseOrigin:[f,l],transposedX:f,transposedY:a}}var h=t(o(e,u)),s=t(r(e,u)),d=n(i(e,u));return{d:e,x:d,y:h,y0:s,height:h-s,origin:[h,d],baseOrigin:[s,d],transposedX:h,transposedY:d}},l.decorate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],l):u},l.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.baseValue=function(){return arguments.length?(r=En(arguments.length<=0?void 0:arguments[0]),l):r},l.crossValue=function(){return arguments.length?(i=En(arguments.length<=0?void 0:arguments[0]),l):i},l.mainValue=function(){return arguments.length?(o=En(arguments.length<=0?void 0:arguments[0]),l):o},l.barWidth=function(){return arguments.length?(a=En(arguments.length<=0?void 0:arguments[0]),l):a},l.orient=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],l):c},l},Mn="#c60",kn="#6c0",Ln="#000",An="#ddd",Hn="#999",On={red:Mn,green:kn,black:Ln,gray:An,darkGray:Hn},_n=function(){var t=c.symbol(),n=Sn(),e=Dt("g","point"),r=function(t){return"translate("+t[0]+", "+t[1]+")"},i=function(i){i.selection&&e.transition(i),i.each(function(i,o,u){var c=i.filter(n.defined),l=e(a.select(u[o]),c);l.enter().attr("transform",function(t,e){return r(n.values(t,e).origin)}).attr("fill",On.gray).attr("stroke",On.black).append("path"),l.attr("transform",function(t,e){return r(n.values(t,e).origin)}).select("path").attr("d",t),n.decorate()(l,i,o)})};return T(i,n,S("baseValue","barWidth")),w(i,e,"key"),w(i,t,"type","size"),i},Cn=function(){var t=function(){},n=e.scaleIdentity(),r=e.scaleIdentity(),i=[],o=function(t){return t},u=function(t,n){return n},a=function(){};return a.mapping=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a.key=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],a):u},a.series=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.yScale=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.decorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a},Dn=function(){var t=Cn(),n=Dt("g"),e=Dt("g","multi"),r=function(r){r.selection&&(e.transition(r),n.transition(r));var i=t.mapping(),o=t.series(),u=t.xScale(),c=t.yScale();r.each(function(r,l,f){var h=e(a.select(f[l]),o);h.each(function(t,e,o){t.xScale(u).yScale(c);var l=i(r,t,e),f=n(a.select(o[e]),[l]);f.call(t)});var s=h.selection?h.selection():h;s.order(),t.decorate()(h,r,l)})};return T(r,t),w(r,e,"key"),r},Nn=function(){var t=function(t){return t.x},n=function(t){return t.y},r=e.scaleIdentity(),i=e.scaleIdentity(),o=function(){},u=Dt("g","annotation-crosshair"),c=_n(),l=xn(),f=xn().orient("vertical"),h=e.scaleIdentity(),s=e.scaleIdentity(),d=Dn().series([l,f,c]).xScale(h).yScale(s).mapping(function(t){return[t]}),g=function(e){e.selection&&u.transition(e),e.each(function(e,g,v){var p=u(a.select(v[g]),e);p.enter().style("pointer-events","none"),h.range(r.range()),s.range(i.range()),c.crossValue(t).mainValue(n),l.value(n),f.value(t),p.call(d),o(p,e,g)})};g.x=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],g):t},g.y=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],g):n},g.xScale=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],g):r},g.yScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],g):i},g.decorate=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],g):o};var v=M("label");return T(g,l,v,A("y")),T(g,f,v,A("x")),g},In=function(){var t=e.scaleIdentity(),n=10,r=null,i=function(){return null!=r?r:t.ticks?t.ticks(n):t.domain()};return i.scale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.ticks=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.tickValues=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i},Vn=function(t){return t},Pn=function(){var t=function(){},n=function(){},e=In(),r=In(),i=Dt("line","gridline-y").key(Vn),o=Dt("line","gridline-x").key(Vn),u=function(u){u.selection&&(i.transition(u),o.transition(u)),u.each(function(u,c,l){var f=l[c],h=a.select(l[c]),s=e.scale(),d=r.scale(),g=f.__x_scale__||s;f.__x_scale__=s.copy();var v=e(),p=i(h,v);p.attr("x1",s).attr("x2",s).attr("y1",d.range()[0]).attr("y2",d.range()[1]).attr("stroke","#bbb"),p.enter().attr("x1",g).attr("x2",g).attr("y1",d.range()[0]).attr("y2",d.range()[1]),p.exit().attr("x1",s).attr("x2",s),t(p,v,c);var m=f.__y_scale__||d;f.__y_scale__=d.copy();var y=r(),b=o(h,y);b.attr("y1",d).attr("y2",d).attr("x1",s.range()[0]).attr("x2",s.range()[1]).attr("stroke","#bbb"),b.enter().attr("y1",m).attr("y2",m).attr("x1",s.range()[0]).attr("x2",s.range()[1]),b.exit().attr("y1",d).attr("y2",d),n(b,y,c)})};return u.yDecorate=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},u.xDecorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},T(u,i,k({key:"xKey"})),T(u,o,k({key:"yKey"})),T(u,e,A("x")),T(u,r,A("y")),u},zn=function(t){return t},Rn=function t(n,e){var r=[10],i=null,o=function(){},u=null,l=6,f=6,h=3,s=c.line(),d=Dt("g","tick").key(zn),g=Dt("path","domain"),v=function(t,n){var e=0;return t.bandwidth&&(e=t.bandwidth()/2,t.round()&&(e=Math.round(e))),function(r){return n(t(r)+e,0)}},p=function(t,n){return y()?"translate("+n+", "+t+")":"translate("+t+", "+n+")"},m=function(t){return y()?t.map(function(t){return[t[1],t[0]]}):t},y=function(){return"left"===n||"right"===n},b=function(t,n,r){return e[t]?e[t].apply(e,n):r},t=function(t){t.selection&&(d.transition(t),g.transition(t)),t.each(function(t,c,w){var x=w[c],T=a.select(x);x.__scale__||T.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===n?"start":"left"===n?"end":"middle");var E=x.__scale__||e;
x.__scale__=e.copy();var S=null==i?b("ticks",r,e.domain()):i,M=null==u?b("tickFormat",r,zn):u,k="bottom"===n||"right"===n?1:-1,L=e.range(),A=m([[L[0],k*l],[L[0],0],[L[1],0],[L[1],k*l]]),H=g(T,[t]);H.attr("d",s(A)).attr("stroke","#000");var O=d(T,S);O.enter().attr("transform",v(E,p)).append("path").attr("stroke","#000");var _=k*(f+h);O.enter().append("text").attr("transform",p(0,_)).attr("fill","#000"),O.exit().attr("transform",v(e,p)),O.select("path").attr("d",function(t){return s(m([[0,0],[0,k*f]]))}),O.select("text").attr("transform",p(0,_)).attr("dy",function(){var t="0em";return y()?t="0.32em":"bottom"===n&&(t="0.71em"),t}).text(M),O.attr("transform",v(e,p)),o(O,t,c)})};return t.tickFormat=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],t):u},t.tickSize=function(){return arguments.length?(f=l=Number(arguments.length<=0?void 0:arguments[0]),t):f},t.tickSizeInner=function(){return arguments.length?(f=Number(arguments.length<=0?void 0:arguments[0]),t):f},t.tickSizeOuter=function(){return arguments.length?(l=Number(arguments.length<=0?void 0:arguments[0]),t):l},t.tickPadding=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],t):h},t.decorate=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],t):o},t.scale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t):e},t.ticks=function(){for(var n=arguments.length,e=Array(n),i=0;i<n;i++)e[i]=arguments[i];return r=[].concat(e),t},t.tickArguments=function(){return arguments.length?(r=null==(arguments.length<=0?void 0:arguments[0])?[]:[].concat(R(arguments.length<=0?void 0:arguments[0])),t):r.slice()},t.tickValues=function(){return arguments.length?(i=null==(arguments.length<=0?void 0:arguments[0])?[]:[].concat(R(arguments.length<=0?void 0:arguments[0])),t):i.slice()},t},Fn=function(t){return Rn("top",t)},Un=function(t){return Rn("bottom",t)},Bn=function(t){return Rn("left",t)},qn=function(t){return Rn("right",t)};!function(t,n){function e(){var t=k.splice(0,k.length);for(Xt=0;t.length;)t.shift().call(null,t.shift())}function r(t,n){for(var e=0,r=t.length;e<r;e++)v(t[e],n)}function i(t){for(var n,e=0,r=t.length;e<r;e++)n=t[e],D(n,it[u(n)])}function o(t){return function(n){Vt(n)&&(v(n,t),ot.length&&r(n.querySelectorAll(ot),t))}}function u(t){var n=Ut.call(t,"is"),e=t.nodeName.toUpperCase(),r=at.call(rt,n?tt+n.toUpperCase():J+e);return n&&-1<r&&!a(e,n)?-1:r}function a(t,n){return-1<ot.indexOf(t+'[is="'+n+'"]')}function c(t){var n=t.currentTarget,e=t.attrChange,r=t.attrName,i=t.target,o=t[G]||2,u=t[X]||3;nn&&(!i||i===n)&&n[U]&&"style"!==r&&(t.prevValue!==t.newValue||""===t.newValue&&(e===o||e===u))&&n[U](r,e===o?null:t.prevValue,e===u?null:t.newValue)}function l(t){var n=o(t);return function(t){k.push(n,t.target),Xt&&clearTimeout(Xt),Xt=setTimeout(e,1)}}function f(t){tn&&(tn=!1,t.currentTarget.removeEventListener(K,f)),ot.length&&r((t.target||E).querySelectorAll(ot),t.detail===R?R:P),Nt&&d()}function h(t,n){var e=this;Wt.call(e,t,n),L.call(e,{target:e})}function s(t,n){_t(t,n),O?O.observe(t,Gt):(Jt&&(t.setAttribute=h,t[I]=H(t),t[V]($,L)),t[V](Z,c)),t[j]&&nn&&(t.created=!0,t[j](),t.created=!1)}function d(){for(var t,n=0,e=Pt.length;n<e;n++)t=Pt[n],ut.contains(t)||(e--,Pt.splice(n--,1),v(t,R))}function g(t){throw new Error("A "+t+" type is already registered")}function v(t,n){var e,r=u(t);-1<r&&(C(t,it[r]),r=0,n!==P||t[P]?n===R&&!t[R]&&(t[P]=!1,t[R]=!0,r=1):(t[R]=!1,t[P]=!0,r=1,Nt&&at.call(Pt,t)<0&&Pt.push(t)),r&&(e=t[n+z])&&e.call(t))}function p(){}function m(t,n,e){var r=e&&e[F]||"",i=n.prototype,o=Ot(i),u=n.observedAttributes||st,a={prototype:o};It(o,j,{value:function(){if(Mt)Mt=!1;else if(!this[bt]){this[bt]=!0,new n(this),i[j]&&i[j].call(this);var t=kt[At.get(n)];(!xt||t.create.length>1)&&w(this)}}}),It(o,U,{value:function(t){-1<at.call(u,t)&&i[U].apply(this,arguments)}}),i[q]&&It(o,B,{value:i[q]}),i[W]&&It(o,Q,{value:i[W]}),r&&(a[F]=r),t=t.toUpperCase(),kt[t]={constructor:n,create:r?[r,Ht(t)]:[t]},At.set(n,t),E[N](t.toLowerCase(),a),x(t),Lt[t].r()}function y(t){var n=kt[t.toUpperCase()];return n&&n.constructor}function b(t){return"string"==typeof t?t:t&&t.is||""}function w(t){for(var n,e=t[U],r=e?t.attributes:st,i=r.length;i--;)n=r[i],e.call(t,n.name||n.nodeName,null,n.value||n.nodeValue)}function x(t){return t=t.toUpperCase(),t in Lt||(Lt[t]={},Lt[t].p=new St(function(n){Lt[t].r=n})),Lt[t].p}function T(){wt&&delete t.customElements,ht(t,"customElements",{configurable:!0,value:new p}),ht(t,"CustomElementRegistry",{configurable:!0,value:p});for(var n=function(n){var e=t[n];if(e){t[n]=function(t){var n,r;return t||(t=this),t[bt]||(Mt=!0,n=kt[At.get(t.constructor)],r=xt&&1===n.create.length,t=r?Reflect.construct(e,st,n.constructor):E.createElement.apply(E,n.create),t[bt]=!0,Mt=!1,r||w(t)),t},t[n].prototype=e.prototype;try{e.prototype.constructor=t[n]}catch(r){yt=!0,ht(e,bt,{value:t[n]})}}},e=M.get(/^HTML[A-Z]*[a-z]/),r=e.length;r--;n(e[r]));E.createElement=function(t,n){var e=b(n);return e?Qt.call(this,t,Ht(e)):Qt.call(this,t)},Zt||($t=!0,E[N](""))}var E=t.document,S=t.Object,M=function(t){var n,e,r,i,o=/^[A-Z]+[a-z]/,u=function t(n){var t,e=[];for(t in c)n.test(t)&&e.push(t);return e},a=function(t,n){n=n.toLowerCase(),n in c||(c[t]=(c[t]||[]).concat(n),c[n]=c[n.toUpperCase()]=t)},c=(S.create||S)(null),l={};for(e in t)for(i in t[e])for(r=t[e][i],c[i]=r,n=0;n<r.length;n++)c[r[n].toLowerCase()]=c[r[n].toUpperCase()]=i;return l.get=function(t){return"string"==typeof t?c[t]||(o.test(t)?[]:""):u(t)},l.set=function(t,n){return o.test(t)?a(t,n):a(n,t),l},l}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});n||(n="auto");var k,L,A,H,O,_,C,D,N="registerElement",I="__"+N+(1e5*t.Math.random()>>0),V="addEventListener",P="attached",z="Callback",R="detached",F="extends",U="attributeChanged"+z,B=P+z,q="connected"+z,W="disconnected"+z,j="created"+z,Q=R+z,G="ADDITION",Y="MODIFICATION",X="REMOVAL",Z="DOMAttrModified",K="DOMContentLoaded",$="DOMSubtreeModified",J="<",tt="=",nt=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,et=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],rt=[],it=[],ot="",ut=E.documentElement,at=rt.indexOf||function(t){for(var n=this.length;n--&&this[n]!==t;);return n},ct=S.prototype,lt=ct.hasOwnProperty,ft=ct.isPrototypeOf,ht=S.defineProperty,st=[],dt=S.getOwnPropertyDescriptor,gt=S.getOwnPropertyNames,vt=S.getPrototypeOf,pt=S.setPrototypeOf,mt=!!S.__proto__,yt=!1,bt="__dreCEv1",wt=t.customElements,xt="force"!==n&&!!(wt&&wt.define&&wt.get&&wt.whenDefined),Tt=S.create||S,Et=t.Map||function(){var t,n=[],e=[];return{get:function(t){return e[at.call(n,t)]},set:function(r,i){t=at.call(n,r),t<0?e[n.push(r)-1]=i:e[t]=i}}},St=t.Promise||function(t){function n(t){for(r=!0;e.length;)e.shift()(t)}var e=[],r=!1,i={catch:function(){return i},then:function(t){return e.push(t),r&&setTimeout(n,1),i}};return t(n),i},Mt=!1,kt=Tt(null),Lt=Tt(null),At=new Et,Ht=String,Ot=S.create||function t(n){return n?(t.prototype=n,new t):this},_t=pt||(mt?function(t,n){return t.__proto__=n,t}:gt&&dt?function(){function t(t,n){for(var e,r=gt(n),i=0,o=r.length;i<o;i++)e=r[i],lt.call(t,e)||ht(t,e,dt(n,e))}return function(n,e){do t(n,e);while((e=vt(e))&&!ft.call(e,n));return n}}():function(t,n){for(var e in n)t[e]=n[e];return t}),Ct=t.MutationObserver||t.WebKitMutationObserver,Dt=(t.HTMLElement||t.Element||t.Node).prototype,Nt=!ft.call(Dt,ut),It=Nt?function(t,n,e){return t[n]=e.value,t}:ht,Vt=Nt?function(t){return 1===t.nodeType}:function(t){return ft.call(Dt,t)},Pt=Nt&&[],zt=Dt.attachShadow,Rt=Dt.cloneNode,Ft=Dt.dispatchEvent,Ut=Dt.getAttribute,Bt=Dt.hasAttribute,qt=Dt.removeAttribute,Wt=Dt.setAttribute,jt=E.createElement,Qt=jt,Gt=Ct&&{attributes:!0,characterData:!0,attributeOldValue:!0},Yt=Ct||function(t){Jt=!1,ut.removeEventListener(Z,Yt)},Xt=0,Zt=N in E,Kt=!0,$t=!1,Jt=!0,tn=!0,nn=!0;if(Zt||(pt||mt?(C=function(t,n){ft.call(n,t)||s(t,n)},D=s):(C=function(t,n){t[I]||(t[I]=S(!0),s(t,n))},D=C),Nt?(Jt=!1,function(){var t=dt(Dt,V),n=t.value,e=function(t){var n=new CustomEvent(Z,{bubbles:!0});n.attrName=t,n.prevValue=Ut.call(this,t),n.newValue=null,n[X]=n.attrChange=2,qt.call(this,t),Ft.call(this,n)},r=function t(n,e){var r=Bt.call(this,n),t=r&&Ut.call(this,n),i=new CustomEvent(Z,{bubbles:!0});Wt.call(this,n,e),i.attrName=n,i.prevValue=r?t:null,i.newValue=e,r?i[Y]=i.attrChange=1:i[G]=i.attrChange=0,Ft.call(this,i)},i=function t(n){var t,e=n.currentTarget,r=e[I],i=n.propertyName;r.hasOwnProperty(i)&&(r=r[i],t=new CustomEvent(Z,{bubbles:!0}),t.attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=e[i]||null,null==t.prevValue?t[G]=t.attrChange=0:t[Y]=t.attrChange=1,Ft.call(e,t))};t.value=function(t,o,u){t===Z&&this[U]&&this.setAttribute!==r&&(this[I]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=e,n.call(this,"propertychange",i)),n.call(this,t,o,u)},ht(Dt,V,t)}()):Ct||(ut[V](Z,Yt),ut.setAttribute(I,1),ut.removeAttribute(I),Jt&&(L=function(t){var n,e,r,i=this;if(i===t.target){n=i[I],i[I]=e=H(i);for(r in e){if(!(r in n))return A(0,i,r,n[r],e[r],G);if(e[r]!==n[r])return A(1,i,r,n[r],e[r],Y)}for(r in n)if(!(r in e))return A(2,i,r,n[r],e[r],X)}},A=function(t,n,e,r,i,o){var u={attrChange:t,currentTarget:n,attrName:e,prevValue:r,newValue:i};u[o]=t,c(u)},H=function(t){for(var n,e,r={},i=t.attributes,o=0,u=i.length;o<u;o++)n=i[o],e=n.name,"setAttribute"!==e&&(r[e]=n.value);return r})),E[N]=function(t,n){if(e=t.toUpperCase(),Kt&&(Kt=!1,Ct?(O=function(t,n){function e(t,n){for(var e=0,r=t.length;e<r;n(t[e++]));}return new Ct(function(r){for(var i,o,u,a=0,c=r.length;a<c;a++)i=r[a],"childList"===i.type?(e(i.addedNodes,t),e(i.removedNodes,n)):(o=i.target,nn&&o[U]&&"style"!==i.attributeName&&(u=Ut.call(o,i.attributeName),u!==i.oldValue&&o[U](i.attributeName,i.oldValue,u)))})}(o(P),o(R)),_=function(t){return O.observe(t,{childList:!0,subtree:!0}),t},_(E),zt&&(Dt.attachShadow=function(){return _(zt.apply(this,arguments))})):(k=[],E[V]("DOMNodeInserted",l(P)),E[V]("DOMNodeRemoved",l(R))),E[V](K,f),E[V]("readystatechange",f),Dt.cloneNode=function(t){var n=Rt.call(this,!!t),e=u(n);return-1<e&&D(n,it[e]),t&&ot.length&&i(n.querySelectorAll(ot)),n}),$t)return $t=!1;if(-2<at.call(rt,tt+e)+at.call(rt,J+e)&&g(t),!nt.test(e)||-1<at.call(et,e))throw new Error("The type "+t+" is invalid");var e,a,c=function(){return s?E.createElement(d,e):E.createElement(d)},h=n||ct,s=lt.call(h,F),d=s?n[F].toUpperCase():e;return s&&-1<at.call(rt,J+d)&&g(d),a=rt.push((s?tt:J)+e)-1,ot=ot.concat(ot.length?",":"",s?d+'[is="'+t.toLowerCase()+'"]':d),c.prototype=it[a]=lt.call(h,"prototype")?h.prototype:Ot(Dt),ot.length&&r(E.querySelectorAll(ot),P),c},E.createElement=Qt=function(t,n){var e=b(n),r=e?jt.call(E,t,Ht(e)):jt.call(E,t),i=""+t,o=at.call(rt,(e?tt:J)+(e||i).toUpperCase()),u=-1<o;return e&&(r.setAttribute("is",e=e.toLowerCase()),u&&(u=a(i.toUpperCase(),e))),nn=!E.createElement.innerHTMLHelper,u&&D(r,it[o]),r}),p.prototype={constructor:p,define:xt?function(t,n,e){if(e)m(t,n,e);else{var r=t.toUpperCase();kt[r]={constructor:n,create:[r]},At.set(n,r),wt.define(t,n)}}:m,get:xt?function(t){return wt.get(t)||y(t)}:y,whenDefined:xt?function(t){return St.race([wt.whenDefined(t),x(t)])}:x},wt&&"force"!==n)try{!function(n,e,r){if(e[F]="a",n.prototype=Ot(HTMLAnchorElement.prototype),n.prototype.constructor=n,t.customElements.define(r,n,e),Ut.call(E.createElement("a",{is:r}),"is")!==r||xt&&Ut.call(new n,"is")!==r)throw e}(function t(){return Reflect.construct(HTMLAnchorElement,[],t)},{},"document-register-element-a")}catch(t){T()}else T();try{jt.call(E,"a","a")}catch(t){Ht=function(t){return{is:t}}}}(window);var Wn="__d3fc-elements__",jn=function(t){return t[Wn]||{}},Qn=function(t,n){return void(t[Wn]=n)},Gn=function(t){return delete t[Wn]},Yn=function(t){return"D3FC-GROUP"===t.tagName?[t].concat(R(t.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg"))):[t]},Xn=function(t){if("D3FC-GROUP"!==t.tagName){var n=jn(t),e=n.width,r=n.height,i=t.clientWidth,o=t.clientHeight,u=i!==e||o!==r;Qn(t,{width:i,height:o,resized:u})}},Zn=function(t){if("D3FC-GROUP"!==t.tagName){var n=jn(t),e=t.childNodes[0];e.setAttribute("width",n.width),e.setAttribute("height",n.height);var r=new CustomEvent("measure",{detail:n});t.dispatchEvent(r)}},Kn=function(t){var n=jn(t),e=new CustomEvent("draw",{detail:n});t.dispatchEvent(e)},$n=function(t){var n=t.map(Yn).reduce(function(t,n){return t.concat(n)});n.forEach(Xn),n.forEach(Zn),n.forEach(Kn)},Jn=function(t){return jn(t.ownerDocument).queue||[]},te=function(t,n){var e=jn(t.ownerDocument),r=e.requestId;null==r&&(r=requestAnimationFrame(function(){var n=Jn(t);$n(n),ne(t)})),Qn(t.ownerDocument,{queue:n,requestId:r})},ne=function(t){return Gn(t.ownerDocument)},ee=function(t,n){var e=t;do if(e.parentNode===n)return!0;while(e=e.parentNode);return!1},re=function(t){var n=Jn(t),e=n.indexOf(t)>-1;if(!e){var r=n.some(function(n){return ee(t,n)});if(!r){var i=n.filter(function(n){return!ee(n,t)});i.push(t),te(t,i)}}},ie=function(t,n){t.__node__=n},oe=function(t){return function(n){function e(n){var r,i;return N(this,e),ie(n=r=P(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n)),t()),i=n,P(r,i)}return V(e,n),I(e,[{key:"connectedCallback",value:function(){this.appendChild(this.__node__)}},{key:"requestRedraw",value:function(){re(this)}}]),e}(HTMLElement)},ue=oe(function(){return document.createElement("canvas")}),ae=function(t){function n(t){var e,r;return N(this,n),r=t=e=P(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t)),P(e,r)}return V(n,t),I(n,[{key:"requestRedraw",value:function(){re(this)}},{key:"updateAutoResize",value:function(){var t=this;this.autoResize?(null==this.__autoResizeListener__&&(this.__autoResizeListener__=function(){return re(t)}),addEventListener("resize",this.__autoResizeListener__)):removeEventListener("resize",this.__autoResizeListener__)}},{key:"attributeChangedCallback",value:function(t){switch(t){case"auto-resize":this.updateAutoResize()}}},{key:"autoResize",get:function(){return this.hasAttribute("auto-resize")&&"false"!==this.getAttribute("auto-resize")},set:function(t){t&&!this.autoResize?this.setAttribute("auto-resize",""):!t&&this.autoResize&&this.removeAttribute("auto-resize"),this.updateAutoResize()}}],[{key:"observedAttributes",get:function(){return["auto-resize"]}}]),n}(HTMLElement),ce=oe(function(){return document.createElementNS("http://www.w3.org/2000/svg","svg")}),le="d3fc-canvas,d3fc-svg{position:relative}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;top:0;right:0;left:0;bottom: 0}d3fc-svg>svg{overflow:visible}",fe=document.createElement("style");fe.setAttribute("type","text/css"),document.querySelector("head").appendChild(fe),fe.styleSheet?fe.styleSheet.cssText+=le:fe.textContent+=le,customElements.define("d3fc-canvas",ue),customElements.define("d3fc-group",ae),customElements.define("d3fc-svg",ce);var he=function(){function t(){var t=a.mouse(this);e.call("point",this,[{x:t[0],y:t[1]}])}function n(){void e.call("point",this,[])}var e=l.dispatch("point"),r=function(e){e.on("mouseenter.pointer",t).on("mousemove.pointer",t).on("mouseleave.pointer",n)};return w(r,e,"on"),r},se=function(){var t="",n="vertical",e=function(t,n){return Number(t[n])},r=function(n){return Object.keys(n[0]).filter(function(n){return n!==t}).map(function(r){var i=n.filter(function(t){return t[r]}).map(function(n){var i=[n[t],e(n,r)];return i.data=n,i});return i.key=r,i})},i=function(n){return n.map(function(n){var r=Object.keys(n).filter(function(n){return n!==t}).map(function(t){var r=[t,e(n,t)];return r.data=n,r});return r.key=n[t],r})},o=function(t){return"vertical"===n?r(t):i(t)};return o.key=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.value=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.orient=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o},de=function(t){return"function"==typeof t?t:function(){return t}},ge=function(t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.scaleIdentity(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.scaleIdentity(),o=de(""),u=de(""),c="right",l="bottom",f=de(""),h=qt(),s=null,d=void 0,g=function(){},v=null,p=void 0,m=function(){},y=function(){},b=function(t){switch(t){case"bottom":return Un();case"top":return Fn();case"left":return Bn();case"right":return qn()}},w=b(l),x=b(c),E=Dt("d3fc-group","cartesian-chart"),M=function(t){return function(n){return t.selection?n.transition(t):n}},k=function(e){var b=M(e);e.each(function(e,T,S){var M=E(a.select(S[T]),[e]);M.enter().attr("style","display: flex; height: 100%; width: 100%; flex-direction: column").attr("auto-resize","").html("<div class='chart-label'\n                                style='height: "+(f?2:0)+"em; line-height: 2em; text-align: center; margin-"+c+": 4em'>\n                          </div>\n                          <div style='flex: 1; display: flex; flex-direction: "+("bottom"===l?"column":"column-reverse")+"'>\n                              <div style='flex: 1; display: flex; flex-direction: "+("right"===c?"row":"row-reverse")+"'>\n                                  <"+t+" class='plot-area' style='flex: 1; overflow: hidden'></"+t+">\n                                  <d3fc-svg class='y-axis' style='width: 3em'></d3fc-svg>\n                                  <div style='width: 1em; display: flex; align-items: center; justify-content: center'>\n                                      <div class='y-axis-label' style='transform: rotate(-90deg)'></div>\n                                  </div>\n                              </div>\n                              <d3fc-svg class='x-axis' style='height: 2em; margin-"+c+": 4em'></d3fc-svg>\n                              <div class='x-axis-label' style='height: 1em; line-height: 1em; text-align: center; margin-"+c+": 4em'></div>\n                          </div>"),M.select(".y-axis-label").text(o(e)),M.select(".x-axis-label").text(u(e)),M.select(".chart-label").text(f(e)),M.select(".y-axis").on("measure",function(t,n,e){if("left"===c){var r=a.event.detail,i=r.width,o=r.height;a.select(e[n]).select("svg").attr("viewBox",-i+" 0 "+i+" "+o)}}).on("draw",function(t,n,e){if(x.tickFormat(v).decorate(m),p){var r;(r=x).ticks.apply(r,R(p))}b(a.select(e[n])).select("svg").call(x.scale(i))}),M.select(".x-axis").on("measure",function(t,n,e){if("top"===l){var r=a.event.detail,i=r.width,o=r.height;a.select(e[n]).select("svg").attr("viewBox","0 "+-o+" "+i+" "+o)}}).on("draw",function(t,n,e){if(w.tickFormat(s).decorate(g),d){var i;(i=w).ticks.apply(i,R(d))}b(a.select(e[n])).select("svg").call(w.scale(r))}),M.select(".plot-area").on("measure",function(){var t=a.event.detail,n=t.width,e=t.height;r.range([0,n]),i.range([e,0])}).on("draw",function(t,e,o){h.xScale(r).yScale(i),n(t,o[e],h,b)}),M.each(function(t,n,e){return e[n].requestRedraw()}),y(M,e,T)})},L=S(/range\w*/,/tickFormat/);return T(k,r,L,A("x")),T(k,i,L,A("y")),k.xTickFormat=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],k):s},k.xTicks=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return d=n,k},k.xDecorate=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],k):g},k.yTickFormat=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],k):v},k.yTicks=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return p=n,k},k.yDecorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],k):m},k.yOrient=function(){if(!arguments.length)return c;var t=arguments.length<=0?void 0:arguments[0];return t!==c&&(x=b(t)),c=t,k},k.xOrient=function(){if(!arguments.length)return l;var t=arguments.length<=0?void 0:arguments[0];return t!==l&&(w=b(t)),l=t,k},k.chartLabel=function(){return arguments.length?(f=de(arguments.length<=0?void 0:arguments[0]),k):f},k.plotArea=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],k):h},k.xLabel=function(){return arguments.length?(u=de(arguments.length<=0?void 0:arguments[0]),k):u},k.yLabel=function(){return arguments.length?(o=de(arguments.length<=0?void 0:arguments[0]),k):o},k.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],k):y},k}},ve=ge("d3fc-svg",function(t,n,e,r){r(a.select(n)).select("svg").call(e)}),pe=function(){return ve.apply(void 0,arguments)},me=ge("d3fc-canvas",function(t,n,e){var r=n.childNodes[0];e.context(r.getContext("2d")),e(t)}),ye=function(){return me.apply(void 0,arguments)};t.indicatorBollingerBands=O,t.indicatorExponentialMovingAverage=_,t.indicatorMacd=C,t.indicatorRelativeStrengthIndex=F,t.indicatorStochasticOscillator=B,t.indicatorForceIndex=q,t.indicatorEnvelope=W,t.indicatorElderRay=j,t.indicatorMovingAverage=U,t.scaleDiscontinuous=v,t.discontinuitySkipWeekends=G,t.discontinuityIdentity=Q,t.discontinuityRange=Y,t.extentLinear=X,t.extentDate=Z,t.randomFinancial=$,t.randomGeometricBrownianMotion=K,t.randomSkipWeekends=J,t.feedGdax=tt,t.feedQuandl=nt,t.bucket=et,t.largestTriangleOneBucket=rt,t.largestTriangleThreeBucket=it,t.modeMedian=ot,t.rebind=w,t.rebindAll=T,t.exclude=S,t.include=M,t.includeMap=k,t.prefix=A,t.shapeOhlc=at,t.shapeBar=ct,t.shapeCandlestick=lt,t.shapeBoxPlot=ft,t.shapeErrorBar=ht,t.layoutLabel=vt,t.layoutTextLabel=pt,t.layoutGreedy=Mt,t.layoutAnnealing=At,t.layoutRemoveOverlaps=Ot,t.layoutBoundingBox=_t,t.dataJoin=Dt,t.effectivelyZero=Ct,t.seriesFractionalBarWidth=Nt,t.seriesSvgLine=qt,t.seriesCanvasLine=Wt,t.seriesSvgPoint=jt,t.seriesCanvasPoint=Qt,t.seriesSvgBar=Gt,t.seriesCanvasBar=Yt,t.seriesSvgErrorBar=Zt,t.seriesCanvasErrorBar=Kt,t.seriesSvgArea=$t,t.seriesCanvasArea=Jt,t.seriesSvgCandlestick=en,t.seriesCanvasCandlestick=on,t.seriesSvgBoxPlot=an,t.seriesCanvasBoxPlot=cn,t.seriesSvgOhlc=ln,t.seriesCanvasOhlc=fn,t.seriesSvgMulti=sn,t.seriesCanvasMulti=dn,t.seriesSvgGrouped=vn,t.seriesCanvasGrouped=pn,t.seriesSvgRepeat=mn,t.seriesCanvasRepeat=yn,t.annotationSvgBand=wn,t.annotationSvgCrosshair=Nn,t.annotationSvgLine=xn,t.annotationSvgGridline=Pn,t.axisTop=Fn,t.axisBottom=Un,t.axisLeft=Bn,t.axisRight=qn,t.pointer=he,t.group=se,t.chartSvgCartesian=pe,t.chartCanvasCartesian=ye,Object.defineProperty(t,"__esModule",{value:!0})});